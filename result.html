<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>문제 결과 테스트</title>
</head>
<body>
  <div id="content"></div>

  <script>
    (async () => {
      const passage = localStorage.getItem('passage') || '';

      try {
      const response = await fetch('/api/clm', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ passage })
        });
        if (!response.ok) throw new Error(`HTTP ${response.status}`);

        const q = await response.json();

        const container = document.getElementById('content');
        container.innerHTML = `
          <h2>${q.prompt}</h2>
          ${q.body}
          <p><strong>정답:</strong> ${q.answer}</p>
          <p><strong>해설:</strong> ${q.explanation}</p>
        `;
      } catch (err) {
        console.error('문제 로드 실패:', err);
        document.getElementById('content').textContent = '문제를 불러오는 중 오류가 발생했습니다.';
      }
    })();
  </script>
</body>
</html>
